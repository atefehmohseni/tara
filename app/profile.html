
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Tara: photo marketplace!</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/fontAwesome.css">
        <link rel="stylesheet" href="css/light-box.css">
        <link rel="stylesheet" href="css/owl-carousel.css">
        <link rel="stylesheet" href="css/templatemo-style.css">

        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">

        <script src="js/app.js"></script>

        <script src="https://wzrd.in/standalone/buffer"></script>
        <script src="https://unpkg.com/ipfs-api@9.0.0/dist/index.js"
        integrity="sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB"
        crossorigin="anonymous"></script>

        <script type="text/JavaScript">
            function ipfsUpload() {
            console.log("UPLOADDING56565");
            const reader = new FileReader();
            reader.onloadend = function() {
                const ipfs = window.IpfsApi('127.0.0.1', 5001) // Connect to IPFS
                const buf = buffer.Buffer(reader.result) // Convert data into buffer
                ipfs.files.add(buf, (err, result) => { // Upload buffer to IPFS
                if(err) {
                    console.error(err)
                    return
                }
                let url = `https://ipfs.io/ipfs/${result[0].hash}`
                console.log(`Url --> ${url}`)
                <!-- document.getElementById("url").innerHTML= url
                document.getElementById("url").href= url
                document.getElementById("output").src = url
                })
            }
            const photo = document.getElementById("photo");
            reader.readAsArrayBuffer(photo.files[0]); // Read Provided File
            App.addPhoto(url);
            console.log("DONNEEE!");
            }
           
        </script>

        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>

 </head>

<body>
        <header class="nav-down responsive-nav hidden-lg hidden-md">
            <!--/.navbar-header-->
            <div id="main-nav" class="collapse navbar-collapse">
            </div>
        </header>

        <div class="hidde-sm hidden-xs">
            <div class="logo">
                <a href="#">Tara</a>
            </div>
            <nav>
                <ul>
                    <span class="rect"></span>
                    <span class="circle"></span>
                    <h1>Recent Images</h1>
                    <p>This image is stored on IPFS & The Ethereum Blockchain!</p>
                    
                    <img id="image" src="" alt=""/>
                    
                    <h2>Upload New Image</h2>

                    <form action="/">        
                        <fieldset>                        
                        <input type="text" className="form-control" placeholder="photo title" id="phototitle"/>
                        <div className="form-group" id="photodesc" hidden=true>
                            <label>Photo Description</label>
                            <textarea id="photodescdescription"> </textarea>
                        </div>
                        <input type="text" className="form-control" placeholder="photo price" id="photoprice"/>

                        <input type='file' onchange="ipfsUpload();" id="photo"/>

                        <input type='submit' />

                        </fieldset>
                    </form>
                    <a id="url"></a>
                    </br>
                    </br>
                    <img id="output">
                </ul>
            </nav>
        </div>

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/web3.min.js"></script>
    <script src="js/truffle-contract.js"></script>

</body>
</html>